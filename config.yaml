########################################################################################################################
# RASCAL Configuration file                                                                                            #
#                                                                                                                      #
# contact: alvaro@intermet.es                                                                                          #
########################################################################################################################

# Total period that spans the reanalysis data
initial_year: 1900
final_year: 2010

# Training period: Period to use to calculate the PCA and the seasonal mean for the anomalies.
training_start: [1900, 1, 1]
training_end: [2010, 12, 31]

# Reconstruction period: Period to reconstruct.
reconstruction_start: [1900, 1, 1]
reconstruction_end: [2010, 12, 31]

# Input paths
reanalysis_path: "/mnt/2d9c9988-41df-4d5a-95a1-9711f297e69a/data/reanalysis/era20c_rascal/"
observations_path: "/mnt/2d9c9988-41df-4d5a-95a1-9711f297e69a/data/observations/aemet/"

# Output paths
pca_path: './pca/'
temporal_files_path: "./tmp/"
output_path: "./output/"
plot_path: "./plots/"

# Stations
stations:
  - "navacerrada"
  - "segovia"
  - "colmenar"
  - "retiro"

# Variables to reconstruct
variables:
  - "PCP"
  - "TMAX"
  - "TMIN"
  # - "TMAX"
  # - "TMEAN"
  # - "WSPD"
  # - "PCP"

# Synoptic predictor
predictor_lat_min: 33.1
predictor_lat_max: 43.9
predictor_lon_min: 17.6
predictor_lon_max: 28.3
# predictor_lat_min: 30
# predictor_lat_max: 50
# predictor_lon_min: -30
# predictor_lon_max: 5

predictor_grouping: "12hour_1D_mean"

grouping_per_variable:
  TMEAN: "1D_mean"
  TMAX: "1D_max"
  TMIN: "1D_min"
  PCP: "1D_sum"

predictor_for_variable:
  TMEAN: [ '925_129' ]
  TMAX: [ '925_129' ]
  TMIN: [ '925_129' ]
  PCP: [ 'SURF_71.162', 'SURF_72.162' ]

overwrite_predictor: True

# Quantile Mapping Variable
mapping_variables_for_variable:
  TMEAN: [ 'SURF_167']
  TMAX: [ 'SURF_167']
  TMIN: [ 'SURF_167']
  PCP: [ 'SURF_71.162', 'SURF_72.162' ] 


########################################################################################################################
# Principal Component Analysis                                                                                         #
########################################################################################################################
seasons:
  - [12, 1, 2]
  - [3, 4, 5]
  - [6, 7, 8]
  - [9, 10, 11]
standardize_anomalies: True
n_components: 4
pca_scaling: 1
    # 0 : Un-scaled PCs.
    # 1 : PCs are scaled to unit variance (divided by the square-root of their eigenvalue) (default).
    # 2 : PCs are multiplied by the square-root of their eigenvalue.

overwrite_pcs: True

########################################################################################################################
# Analog method                                                                                                        #
########################################################################################################################
analog_pool_size: [20, 50, 100]
weighted_mean_sample_size: [2, 5, 10]
distance: 'euclidean'

validation_window_size: 60
validation_window_type: 'centered'

similarity_methods:
  - 'closest'
  - 'average'
  - 'quantilemap'
